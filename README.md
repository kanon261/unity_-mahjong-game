# 麻雀学習ゲーム

Unityで開発した初心者向け麻雀学習アプリケーションです。
AIによる最適打牌の推奨機能で、効率的に牌効率を学べます。

---

## 動作環境

- Unity 2022.3.x 以上
- Windows / macOS

---

## 起動方法

1. Unity Hubでこのプロジェクトを開く
2. `Assets/Scenes/SampleScene.unity` を開く
3. 再生ボタンをクリック

---

## 操作方法

| 操作 | 説明 |
|------|------|
| 牌をクリック | その牌を捨てる |
| 黄色の牌 | AI推奨の打牌（クリックで捨てられる）|
| ツモボタン | アガリ時に表示、クリックで上がり |
| リスタートボタン | ゲームをリセット |

---

## ゲームの流れ

1. 配牌（13枚）が配られる
2. ツモ（14枚目）を引く
3. AIが最適な打牌を黄色でハイライト
4. 牌をクリックして捨てる
5. 2-4を繰り返し、アガリを目指す

---

## ファイル構成

```
Assets/
├── Scenes/
│   └── SampleScene.unity      # メインシーン
├── Scripts/
│   ├── Core/                  # ロジック層（Unity非依存）
│   │   ├── Tile.cs           # 牌データ
│   │   ├── Wall.cs           # 山牌
│   │   └── Analysis/
│   │       └── HandAnalyzer.cs  # AI・シャンテン計算
│   ├── Engine/                # Unity層
│   │   ├── GameController.cs  # ゲーム制御・UI
│   │   ├── Player.cs         # プレイヤー
│   │   ├── TurnManager.cs    # ターン管理
│   │   └── TileButton.cs     # 牌ボタンUI
│   ├── UI/
│   │   └── TileView3D.cs     # 3D表示用
│   └── Tests/
│       └── AnalysisDebugger.cs  # デバッグ用
├── Prefabs/
│   └── TileButton.prefab     # 牌ボタンプレハブ
├── Sprites/                   # 牌画像
└── Font/                      # フォント
```

---

## アーキテクチャ

### 2層構造

| 層 | 役割 | Unity依存 |
|----|------|-----------|
| Core | ゲームロジック・AI | なし |
| Engine | UI・ゲーム進行 | あり |

### 主要クラス

| クラス | 責務 |
|--------|------|
| GameController | ゲーム全体の制御、UI管理 |
| HandAnalyzer | シャンテン数計算、最適打牌判定 |
| TurnManager | ターン進行管理 |
| Player | 手牌・捨て牌管理 |
| Tile | 牌データ（種類・番号）|
| TileButton | 牌のUI・ハイライト表示 |

---

## AI推奨システム

ルールベースAI（機械学習ではない）

### 評価基準

1. **シャンテン数**: アガリまでの距離（小さいほど良い）
2. **受け入れ枚数**: 有効牌の数（多いほど良い）

### アルゴリズム

```
各牌について:
  1. その牌を捨てた場合のシャンテン数を計算
  2. 受け入れ枚数を計算
  3. シャンテン数が最小 かつ 受け入れが最大の牌を推奨
```

---

## 用語説明

| 用語 | 説明 |
|------|------|
| シャンテン数 | アガリまでに必要な有効牌の枚数 |
| テンパイ | シャンテン数0（あと1枚でアガリ）|
| 受け入れ | 手を進められる有効牌 |
| 面子 | 3枚の組（順子・刻子）|
| 雀頭 | 2枚の対子（アガリに必要）|

---

## 実装済み機能

- 配牌・ツモ・打牌の基本フロー
- シャンテン数の計算・表示
- AI推奨打牌のハイライト表示
- アガリ判定
- 流局判定

---

## 制限事項（未実装）

- 鳴き（ポン・チー・カン）
- 役判定・点数計算
- リーチ
- CPU対戦（CPUは思考せず右端を捨てる）

---

## 今後の展望

- 鳴き機能の追加
- 役判定・点数計算
- 4人対戦モード
- 難易度調整機能
- 機械学習AIの導入

---

## セットアップ方法

```bash
# クローン
git clone https://github.com/kanon261/unity_-mahjong-game.git

# Unity Hub でプロジェクトを開く
# 対応バージョン：Unity 2022.x 以降
